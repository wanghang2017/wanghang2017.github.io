(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{517:function(s,a,t){"use strict";t.r(a);var e=t(6),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"babel篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel篇"}},[s._v("#")]),s._v(" babel篇")]),s._v(" "),t("h4",{attrs:{id:"简史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简史"}},[s._v("#")]),s._v(" 简史")]),s._v(" "),t("p",[s._v("08年  v8诞生   js运行速度迅速提升")]),s._v(" "),t("p",[s._v("09年  node诞生  前端工程化基础")]),s._v(" "),t("p",[s._v("10年  npm出现   前端包管理基础")]),s._v(" "),t("p",[s._v("14年  6to5发布  使用 acorn  做AST引擎")]),s._v(" "),t("p",[s._v("15年  6to5+Esnext => babel  解析引擎Babylon  后来Babylon移入到@babel/parser")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-6623f4c618185943d35b32204c77a9ca_1440w.jpg",alt:"img"}})]),s._v(" "),t("h4",{attrs:{id:"组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组成"}},[s._v("#")]),s._v(" 组成")]),s._v(" "),t("p",[s._v("@babel/core                AST转换的核心")]),s._v(" "),t("p",[s._v("@babel/cli                    打包工具")]),s._v(" "),t("p",[s._v("@babel/preset-env*  插件的集合   减少配置")]),s._v(" "),t("p",[s._v("@babel/plugin*          babel插件机制   Babel基础功能不满足时  手动添加些")]),s._v(" "),t("p",[s._v("@babel/runtime*      类似polyfill  但是 按需导入代码少")]),s._v(" "),t("p",[s._v("@babel/polyfill           把浏览器不支持的api 兼容性代码全部导入项目 不管用到用不到  代码量大")]),s._v(" "),t("p",[s._v(".babelrc/babel.config.js  配置文件")]),s._v(" "),t("h4",{attrs:{id:"babel-core"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-core"}},[s._v("#")]),s._v(" @babel/core")]),s._v(" "),t("p",[s._v("babel编译器。被拆分三个模块：@babel/parser，@babel/traverse，@babel/generator。")]),s._v(" "),t("p",[s._v("@babel/parser: 接受源码，进行词法分析、语法分析，生成AST。")]),s._v(" "),t("p",[s._v("@babel/traverse：接受一个AST，并对其遍历，根据preset、plugin进行逻辑处理，进行替换、删除、添加节点。")]),s._v(" "),t("p",[s._v("@babel/generator：接受最终生成的AST，并将其转换为代码字符串，同时此过程也可以创建source map。")]),s._v(" "),t("p",[s._v("babel转码流程：input string -> @babel/parser parser -> AST -> transformer[s] -> AST -> @babel/generator -> output string。")]),s._v(" "),t("h4",{attrs:{id:"babelrc-babel-config-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babelrc-babel-config-js"}},[s._v("#")]),s._v(" .babelrc/babel.config.js")]),s._v(" "),t("p",[s._v("核心：presets 和 plugins")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"debug"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 2 versions"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"plugins"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/plugin-transform-runtime"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("presets是plugins的集合")]),s._v(" "),t("p",[s._v("最常用的是@babel/preset-env")]),s._v(" "),t("p",[s._v("vue用的@vue/app  = @babel/preset-env + 自定义的plugins")]),s._v(" "),t("p",[s._v("参数：")]),s._v(" "),t("p",[s._v("debug：babel的日志信息，可以看到哪些语法做了转换 默认false")]),s._v(" "),t("p",[s._v("useBuiltIns: 取值 false  entry   usage     默认false啥也不干，entry 引入所有polyfill，usage用到的polyfill引入。")]),s._v(" "),t("p",[s._v("targets： 用来指定转换时需要哪些浏览器支持")]),s._v(" "),t("h6",{attrs:{id:"presets和plugins的加载顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#presets和plugins的加载顺序"}},[s._v("#")]),s._v(" presets和plugins的加载顺序")]),s._v(" "),t("p",[s._v("plugins优于presets加载")]),s._v(" "),t("p",[s._v("plugins顺序加载")]),s._v(" "),t("p",[s._v("presets倒序加载")]),s._v(" "),t("h4",{attrs:{id:"polyfill和runtime的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#polyfill和runtime的区别"}},[s._v("#")]),s._v(" polyfill和runtime的区别")]),s._v(" "),t("p",[s._v("babel只是转换syntax层语法    所以需要\t@babel/polyfill 来处理API")]),s._v(" "),t("p",[s._v("又因为polyfill体积太大  所以通过preset的useBuiltIns来实现按需加载")]),s._v(" "),t("p",[s._v("再接着为了npm组件开发需要，  出现了@babel/runtime来做隔离")])])}),[],!1,null,null,null);a.default=n.exports}}]);